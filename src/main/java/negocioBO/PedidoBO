package negocioBO;
import dominio.Pedidos;
import negocio.PersistenciaException;
import persistenciaDAO.IPedidoDAO;
import java.util.List;
/**
 *
 * @author oscar
 */
public class PedidoBO {
    private final IPedidoDAO pedidoDAO;

    public PedidoBO(IPedidoDAO pedidoDAO) {
        this.pedidoDAO = pedidoDAO;
    }

    public void registrarEntrega(Pedidos pedido, String metodoPago) throws Exception {
        if (!pedido.getEstadoPedido().equals("Listo")) {
            throw new Exception("El pedido debe estar en estado 'Listo' para entregarse.");
        }
        
        pedidoDAO.actualizarEstado(pedido.getIdPedido(), "Entregado");
        
    }
    
    public List<Pedidos> obtenerPedidosPorFiltro(String filtro) throws PersistenciaException {
        return pedidoDAO.buscarPedidos(filtro);
    }
}
